<% references.each_with_index do |reference, index| %>
<% if show_missing_banner?(reference) %>
  <%= render(CandidateInterface::IncompleteSectionComponent.new(**incomplete_section_params)) %>
<% end %>
  <%= render(SummaryCardComponent.new(
    rows: reference_rows(reference),
    editable: show_edit_links?(reference),
    ignore_editable: ignore_editable_for,
  )) do %>
    <%= render(SummaryCardHeaderComponent.new(title: reference.name, heading_level: @heading_level)) do %>
      <div class="app-summary-card__actions">
        <ul class="app-summary-card__actions-list">
          <% if show_delete_link?(reference) %>
            <li class="app-summary-card__actions-list-item">
              <%= govuk_link_to confirm_destroy_path(reference), class: 'govuk-!-font-weight-bold' do %>
                <%= t('application_form.references.delete_reference.action') %>
                <span class="govuk-visually-hidden">reference from <%= reference.name %></span>
              <% end %>
            </li>
          <% elsif reference.feedback_provided? %>
            <%= govuk_tag(text: t('application_form.references.status.received'), colour: 'green') %>
          <% elsif reference.feedback_requested? %>
            <%= govuk_tag(text: t('application_form.references.status.requested'), colour: 'orange') %>
          <% end %>
        </ul>
      </div>
    <% end %>
  <% end %>
<% end %>
