<% if reasons.candidate_behaviour_y_n == 'Yes' %>
  <div class="app-rejection">
    <%= content_tag(subheading_tag_name, 'Something you did', class: 'govuk-heading-s') %>
    <ul class="govuk-list govuk-list--spaced">
      <% reasons.candidate_behaviour_what_did_the_candidate_do.each do |reason| %>
        <li>
          <% if reason == 'other' %>
            <% paragraphs(reasons.candidate_behaviour_other).each do |paragraph| %>
              <p><%= paragraph %></p>
            <% end %>
            <% paragraphs(reasons.candidate_behaviour_what_to_improve).each do |paragraph| %>
              <p><%= paragraph %></p>
            <% end %>
          <% else %>
            <p><%= t("reasons_for_rejection.candidate_behaviour_what_did_the_candidate_do.#{reason}") %>.</p>
          <% end %>
        </li>
      <% end %>
    </ul>
    <% if editable? %>
      <p class="app-rejection__actions">
        <%= govuk_link_to 'Change', provider_interface_reasons_for_rejection_initial_questions_path(application_choice) %>
      </p>
    <% end %>
  </div>
<% end %>

<% if reasons.quality_of_application_y_n == 'Yes' %>
  <div class="app-rejection">
    <%= content_tag(subheading_tag_name, 'Quality of application', class: 'govuk-heading-s') %>
    <ul class="govuk-list govuk-list--spaced">
      <% reasons.quality_of_application_which_parts_needed_improvement.each do |reason| %>
        <li>
          <% if reason == 'other' %>
            <% paragraphs(reasons.quality_of_application_other_details).each do |paragraph| %>
              <p><%= paragraph %></p>
            <% end %>
            <% paragraphs(reasons.quality_of_application_other_what_to_improve).each do |paragraph| %>
              <p><%= paragraph %></p>
            <% end %>
          <% else %>
            <% paragraphs(t("reasons_for_rejection.quality_of_application.#{reason}")).each do |paragraph| %>
              <p><%= paragraph %></p>
            <% end %>
            <% paragraphs(reasons.send(:"quality_of_application_#{reason}_what_to_improve")).each do |paragraph| %>
              <p><%= paragraph %></p>
            <% end %>
          <% end %>
        </li>
      <% end %>
    </ul>
    <% if editable? %>
      <p class="app-rejection__actions">
        <%= govuk_link_to 'Change', provider_interface_reasons_for_rejection_initial_questions_path(application_choice) %>
      </p>
    <% end %>
  </div>
<% end %>

<% if reasons.qualifications_y_n == 'Yes' %>
  <div class="app-rejection">
    <%= content_tag(subheading_tag_name, 'Qualifications', class: 'govuk-heading-s') %>
    <ul class="govuk-list govuk-list--spaced">
      <% reasons.qualifications_which_qualifications.each do |reason| %>
        <li>
          <% if reason == 'other' %>
            <% paragraphs(reasons.qualifications_other_details).each do |paragraph| %>
              <p><%= paragraph %></p>
            <% end %>
          <% else %>
            <p><%= t("reasons_for_rejection.qualifications_which_qualifications.#{reason}") %>.</p>
          <% end %>
        </li>
      <% end %>
      <%= link_to_find_when_rejected_on_qualifications(application_choice) if @render_link_to_find_when_rejected_on_qualifications %>
    </ul>
    <% if editable? %>
      <p class="app-rejection__actions">
        <%= govuk_link_to 'Change', provider_interface_reasons_for_rejection_initial_questions_path(application_choice) %>
      </p>
    <% end %>
  </div>
<% end %>

<% if reasons.performance_at_interview_y_n == 'Yes' %>
  <div class="app-rejection">
    <%= content_tag(subheading_tag_name, 'Performance at interview', class: 'govuk-heading-s') %>
    <% paragraphs(reasons.performance_at_interview_what_to_improve).each do |paragraph| %>
      <p class="govuk-body govuk-!-margin-bottom-3"><%= paragraph %></p>
    <% end %>

    <% if editable? %>
      <p class="app-rejection__actions">
        <%= govuk_link_to 'Change', provider_interface_reasons_for_rejection_initial_questions_path(application_choice) %>
      </p>
    <% end %>
  </div>
<% end %>

<% if reasons.course_full_y_n == 'Yes' %>
  <div class="app-rejection">
    <%= content_tag(subheading_tag_name, 'Course full', class: 'govuk-heading-s') %>
    <p><%= t('reasons_for_rejection.full_course.reason') %> </p>

    <% if editable? %>
      <p class="app-rejection__actions">
        <%= govuk_link_to 'Change', provider_interface_reasons_for_rejection_initial_questions_path(application_choice) %>
      </p>
    <% end %>
  </div>
<% end %>

<% if reasons.offered_on_another_course_y_n == 'Yes' %>
  <div class="app-rejection">
    <%= content_tag(subheading_tag_name, 'They offered you a place on another course', class: 'govuk-heading-s') %>
    <% paragraphs(reasons.offered_on_another_course_details).each do |paragraph| %>
      <p class="govuk-body govuk-!-margin-bottom-3"><%= paragraph %></p>
    <% end %>

    <% if editable? %>
      <p class="app-rejection__actions">
        <%= govuk_link_to 'Change', provider_interface_reasons_for_rejection_initial_questions_path(application_choice) %>
      </p>
    <% end %>
  </div>
<% end %>

<% if reasons.honesty_and_professionalism_y_n == 'Yes' %>
  <div class="app-rejection">
    <%= content_tag(subheading_tag_name, 'Honesty and professionalism', class: 'govuk-heading-s') %>
    <ul class="govuk-list govuk-list--spaced">
      <% if reasons.honesty_and_professionalism_concerns_information_false_or_inaccurate_details.present? %>
        <li>
          <% paragraphs(reasons.honesty_and_professionalism_concerns_information_false_or_inaccurate_details).each do |paragraph| %>
            <p><%= paragraph %></p>
          <% end %>
        </li>
      <% end %>
      <% if reasons.honesty_and_professionalism_concerns_plagiarism_details.present? %>
        <li>
          <% paragraphs(reasons.honesty_and_professionalism_concerns_plagiarism_details).each do |paragraph| %>
            <p><%= paragraph %></p>
          <% end %>
        </li>
      <% end %>
      <% if reasons.honesty_and_professionalism_concerns_references_details.present? %>
        <li>
          <% paragraphs(reasons.honesty_and_professionalism_concerns_references_details).each do |paragraph| %>
            <p><%= paragraph %></p>
          <% end %>
        </li>
      <% end %>
      <% if reasons.honesty_and_professionalism_concerns_other_details.present? %>
        <li>
          <% paragraphs(reasons.honesty_and_professionalism_concerns_other_details).each do |paragraph| %>
            <p><%= paragraph %></p>
          <% end %>
        </li>
      <% end %>
    </ul>
    <% if editable? %>
      <p class="app-rejection__actions">
        <%= govuk_link_to 'Change', provider_interface_reasons_for_rejection_initial_questions_path(application_choice) %>
      </p>
    <% end %>
  </div>
<% end %>

<% if reasons.safeguarding_y_n == 'Yes' %>
  <div class="app-rejection">
    <%= content_tag(subheading_tag_name, 'Safeguarding issues', class: 'govuk-heading-s') %>
    <ul class="govuk-list govuk-list--spaced">
      <% if reasons.safeguarding_concerns_candidate_disclosed_information_details.present? %>
        <li>
          <% paragraphs(reasons.safeguarding_concerns_candidate_disclosed_information_details).each do |paragraph| %>
            <p><%= paragraph %></p>
          <% end %>
        </li>
      <% end %>
      <% if reasons.safeguarding_concerns_vetting_disclosed_information_details.present? %>
        <li>
          <% paragraphs(reasons.safeguarding_concerns_vetting_disclosed_information_details).each do |paragraph| %>
            <p><%= paragraph %></p>
          <% end %>
        </li>
      <% end %>
      <% if reasons.safeguarding_concerns_other_details.present? %>
        <li>
          <% paragraphs(reasons.safeguarding_concerns_other_details).each do |paragraph| %>
            <p><%= paragraph %></p>
          <% end %>
        </li>
      <% end %>
    </ul>
    <% if editable? %>
      <p class="app-rejection__actions">
        <%= govuk_link_to 'Change', provider_interface_reasons_for_rejection_initial_questions_path(application_choice) %>
      </p>
    <% end %>
  </div>
<% end %>

<% if reasons.cannot_sponsor_visa_y_n == 'Yes' %>
  <div class="app-rejection">
    <%= content_tag(subheading_tag_name, I18n.t('reasons_for_rejection.cannot_sponsor_visa.title'), class: 'govuk-heading-s') %>
    <% paragraphs(reasons.cannot_sponsor_visa_details).each do |paragraph| %>
      <p class="govuk-body govuk-!-margin-bottom-3"><%= paragraph %></p>
    <% end %>

    <% if editable? %>
      <p class="app-rejection__actions">
        <%= govuk_link_to 'Change', provider_interface_reasons_for_rejection_initial_questions_path(application_choice) %>
      </p>
    <% end %>
  </div>
<% end %>

<% if reasons.why_are_you_rejecting_this_application.present? %>
  <div class="app-rejection">
    <%= content_tag(subheading_tag_name, I18n.t('reasons_for_rejection.why_are_you_rejecting_this_application.title'), class: 'govuk-heading-s') %>
    <% paragraphs(reasons.why_are_you_rejecting_this_application).each do |paragraph| %>
      <p class="govuk-body govuk-!-margin-bottom-3"><%= paragraph %></p>
    <% end %>
    <% if editable? %>
      <p class="app-rejection__actions">
        <%= govuk_link_to 'Change', provider_interface_reasons_for_rejection_other_reasons_path(application_choice) %>
      </p>
    <% end %>
  </div>
<% end %>

<% if reasons.other_advice_or_feedback_y_n == 'Yes' %>
  <div class="app-rejection">
    <%= content_tag(subheading_tag_name, 'Additional feedback', class: 'govuk-heading-s') %>
    <% paragraphs(reasons.other_advice_or_feedback_details).each do |paragraph| %>
      <p class="govuk-body govuk-!-margin-bottom-3"><%= paragraph %></p>
    <% end %>
    <% if editable? %>
      <p class="app-rejection__actions">
        <%= govuk_link_to 'Change', provider_interface_reasons_for_rejection_other_reasons_path(application_choice) %>
      </p>
    <% end %>
  </div>
<% end %>

<% if %w[Yes No].include?(reasons.interested_in_future_applications_y_n) %>
  <div class="app-rejection">
    <%= content_tag(subheading_tag_name, 'Future applications', class: 'govuk-heading-s') %>
    <p class="govuk-body">
      <%= I18n.t(
        "reasons_for_rejection.interested_in_future_applications.reason.#{reasons.interested_in_future_applications_y_n.downcase}",
        provider_name: application_choice.provider.name,
      ) %>
    </p>
    <% if editable? %>
      <p class="app-rejection__actions">
        <%= govuk_link_to 'Change', provider_interface_reasons_for_rejection_other_reasons_path(application_choice) %>
      </p>
    <% end %>
  </div>
<% end %>
