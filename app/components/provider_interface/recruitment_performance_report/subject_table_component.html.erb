<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <%= govuk_table do |table| %>
      <%= table.with_caption(text: table_caption) %>

      <%= table.with_colgroup do |colgroup| %>
        <%= colgroup.with_col(span: 1) %>
        <%= colgroup.with_col(span: colspan) %>
        <%= colgroup.with_col(span: colspan) %>
      <% end %>

      <%= table.with_head do |head| %>
        <%= head.with_row do |row| %>
          <%= row.with_cell(scope: false) %>
          <%= row.with_cell(text: provider_name, colspan:, scope: 'colgroup', width:,
                            html_attributes: { class: 'recruitment_performance_report_table__header--no-border' }) %>
          <%= row.with_cell(text: t('subject_table_component.all_providers'), colspan:, scope: 'colgroup', width:,
                            html_attributes: { class: 'recruitment_performance_report_table__header--border-left' }) %>
        <% end %>

        <%= head.with_row do |row| %>
          <%= row.with_cell(text: t('subject_table_component.subjects')) %>
          <% columns.each do |column| %>
            <%= row.with_cell(text: t("subject_table_component.#{column}"), **subheading_html_attributes(column)) %>
          <% end %>
        <% end %>
      <% end %>

      <% table.with_body do |body| %>
        <% subject_rows.each do |subject_row| %>
          <% body.with_row do |row| %>
            <%= row.with_cell(header: true, text: subject_row.title, **level_html_attributes(subject_row)) %>
            <%= columns.each do |column| %>
              <%= row.with_cell(text: format_number(subject_row, column), numeric: true, **numeric_html_attributes(column)) %>
            <% end %>
          <% end %>
        <% end %>
      <% end %>

      <% table.with_foot do |foot| %>
        <% foot.with_row do |row| %>
          <%= row.with_cell(header: true, text: t('subject_table_component.all_subjects'),
                            html_attributes: { class: 'recruitment_performance_report_table__row-summary' }) %>
          <%= columns.each do |column| %>
            <%= row.with_cell(text: format_number(summary_row, column), numeric: true) %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>
