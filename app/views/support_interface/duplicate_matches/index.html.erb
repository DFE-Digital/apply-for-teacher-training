<%= render 'support_interface/candidates/candidates_navigation', title: 'Duplicate candidate matches' %>

<p class="govuk-body govuk-!-width-two-thirds">A match appears in this list for applications that have a postcode, name and date of birth in common, but they were created using different candidate accounts.</p>

<% if @matches.empty? %>
  <p class="govuk-body">There are currently no duplicate applications.</p>
<% else %>
  <!-- TODO: extract component... -->
  <table class="govuk-table">
    <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <th scope="col" class="govuk-table__header">Match</th>
        <th scope="col" class="govuk-table__header">Date</th>
      </tr>
    </thead>

    <tbody class="govuk-table__body">
      <% @matches.each do |match| %>
        <tr class="govuk-table__row">
          <td class="govuk-table__cell">
            <%= govuk_link_to "#{match.candidates.first.current_application&.last_name}", support_interface_duplicate_match_path(match) %>
          </td>
          <td class="govuk-table__cell">
            <%= match.created_at.to_s(:govuk_date) %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
