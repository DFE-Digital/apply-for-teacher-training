<% content_for :title, 'Import references' %>
<% content_for :before_content, govuk_back_link_to(support_interface_applications_path) %>

<% if @error %>
  <div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1" data-module="govuk-error-summary">
    <h2 class="govuk-error-summary__title" id="error-summary-title">
      There is a problem
    </h2>
    <div class="govuk-error-summary__body">
      <ul class="govuk-list govuk-error-summary__list">
        <li>
          <a href="#csv_file"><%= @error %></a>
        </li>
      </ul>
    </div>
  </div>
<% end %>

<%= form_tag support_interface_import_references_path, method: :post, multipart: true do %>
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <p class="govuk-body">
        You’ll need to <a href="https://docs.google.com/spreadsheets/d/1pHPMbvRoMtyWOhRF0JQThxu5VxR43K2er7yjSLgsXfk/export?format=csv" class="govuk-link" rel="download">download a CSV of the latest reference responses</a> from Google Docs before you can upload it here.</p>

      <p class="govuk-body">Importing references will:</p>
      <ul class="govuk-list govuk-list--bullet">
        <li>copy each reference to the correct application</li>
        <li>update the application’s status</li>
        <li>report which references were successfully imported</li>
      </ul>

      <div class="govuk-form-group <% if @error %>govuk-form-group--error<% end %>">
        <%= label_tag 'csv_file', 'CSV file', class: 'govuk-label govuk-label--m' %>
        <% if @error %>
          <span id="csv_file-error" class="govuk-error-message">
            <span class="govuk-visually-hidden">Error:</span> <%= @error %>
          </span>
        <% end %>
        <%= file_field_tag 'csv_file', class: 'govuk-file-upload' %>
      </div>
      <%= submit_tag('Import references', class: 'govuk-button') %>
    </div>
  </div>
<% end %>
