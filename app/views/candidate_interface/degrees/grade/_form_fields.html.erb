<% if @degree_grade_form.international? %>
  <%= f.govuk_radio_buttons_fieldset :grade, legend: { text: @page_title, size: 'xl', tag: 'h1' }, hint: { text: t('application_form.degree.grade.international.grade_examples') } do %>
    <%= f.govuk_radio_button :grade, 'other', label: { text: 'Yes' }, link_errors: true do %>
      <% if degree.predicted_grade? %>
        <% text_field_options = { label: nil, hint: { text: t('application_form.degree.grade.international.hint_text') } } %>
      <% else %>
        <% text_field_options = { label: { text: t('application_form.degree.grade.international.label') } } %>
      <% end %>
      <% text_field_options.merge(width: 20) %>
      <%= f.govuk_text_field(:other_grade, text_field_options) %>
    <% end %>
    <% @international_main_grades.each do |grade| %>
      <%= f.govuk_radio_button :grade, grade, label: { text: grade } %>
    <% end %>
  <% end %>
<% else %>
  <%= f.govuk_radio_buttons_fieldset :grade, legend: { text: @page_title, size: 'xl', tag: 'h1' } do %>
    <% if degree.predicted_grade? %>
      <%= govuk_inset_text(text: t('application_form.degree.grade.inset_text')) %>
    <% end %>

    <% @main_grades.each_with_index do |grade, i| %>
      <%= f.govuk_radio_button :grade, grade, label: { text: grade }, link_errors: i.zero? %>
    <% end %>
    <%= f.govuk_radio_button :grade, 'other', label: { text: t('application_form.degree.grade.other.label') } do %>
      <%= render Dfe::Autocomplete::View.new(
        f,
        attribute_name: :other_grade,
        form_field: f.govuk_select(
          :other_grade,
          options_for_select(dfe_autocomplete_options(@other_grades), f.object.other_grade.to_s),
          label: { text: t('application_form.degree.grade.other.conditional.label') },
          width: 10)
      ) %>
    <% end %>
  <% end %>
<% end %>

<%= f.govuk_submit t('save_and_continue') %>
