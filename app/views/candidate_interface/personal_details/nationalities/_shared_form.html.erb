<%= f.govuk_error_summary %>

<%= f.govuk_check_boxes_fieldset :nationalities, legend: { text: t('page_titles.nationalities'), size: 'xl', tag: 'h1' } do %>
  <%= f.govuk_check_box(
    :nationalities,
    'British',
    multiple: true,
    label: { text: 'British' },
    hint: { text: 'including English, Scottish, Welsh or from Northern Ireland' },
    link_errors: true,
  ) %>
  <%= f.govuk_check_box(
    :nationalities,
    'Irish',
    multiple: true,
    label: { text: 'Irish' },
    hint: { text: 'including from Northern Ireland' },
  ) %>
  <%= f.govuk_check_box(
    :nationalities,
    'other',
    multiple: true,
    label: { text: 'Citizen of a different country' },
  ) do %>
    <%= render DfE::Autocomplete::View.new(
      f,
      attribute_name: :other_nationality2,
      form_field: f.govuk_collection_select(
        :other_nationality1,
        select_nationality_options,
        :id,
        :name,
        label: -> { safe_join([tag.span('First ', class: 'govuk-visually-hidden'), t('application_form.personal_details.nationality.label')]) },
      ),
    ) %>
    <%= render DfE::Autocomplete::View.new(
      f,
      attribute_name: :other_nationality2,
      html_attributes: { class: 'govuk-!-margin-top-6' },
      form_field: f.govuk_collection_select(
        :other_nationality2,
        select_nationality_options,
        :id,
        :name,
        label: -> { safe_join([tag.span('Second ', class: 'govuk-visually-hidden'), t('application_form.personal_details.nationality.label')]) },
      ),
    ) %>
    <%= render DfE::Autocomplete::View.new(
      f,
      attribute_name: :other_nationality3,
      html_attributes: { class: 'govuk-!-margin-top-6' },
      form_field: f.govuk_collection_select(
        :other_nationality3,
        select_nationality_options,
        :id,
        :name,
        label: -> { safe_join([tag.span('Third ', class: 'govuk-visually-hidden'), t('application_form.personal_details.nationality.label')]) },
      ),
    ) %>
  <% end %>
<% end %>

<%= f.govuk_submit t('save_and_continue') %>
