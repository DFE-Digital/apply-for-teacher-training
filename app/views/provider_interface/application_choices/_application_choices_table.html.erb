<table class='govuk-table'>
   <thead class='govuk-table__head'>
     <tr class='govuk-table__row'>
        <%= render ProviderInterface::SortableColumnHeadingComponent.new(sort_order: @page_state.sort_order,
                                                                         column_name: 'Name',
                                                                         current_sort_by: @page_state.sort_by,
                                                                         css_class: 'govuk-table__header govuk-!-width-one-quarter',
                                                                         params_for_current_state: @page_state.to_h) %>

        <%= render ProviderInterface::SortableColumnHeadingComponent.new(sort_order: @page_state.sort_order,
                                                                         column_name: 'Course',
                                                                         current_sort_by: @page_state.sort_by,
                                                                         css_class: 'govuk-table__header govuk-!-width-one-quarter',
                                                                         params_for_current_state: @page_state.to_h) %>


        <th scope='col' class='govuk-table__header govuk-!-width-one-quarter'>Status</th>

        <%= render ProviderInterface::SortableColumnHeadingComponent.new(sort_order: @page_state.sort_order,
                                                                         column_name: 'Last updated',
                                                                         current_sort_by: @page_state.sort_by,
                                                                         css_class: 'govuk-table__header govuk-!-width-one-quarter govuk-table__header--numeric',
                                                                         params_for_current_state: @page_state.to_h) %>
      </tr>
   </thead>

   <tbody class='govuk-table__body'>
    <% @application_choices.each do |application_choice| %>
      <tr class='govuk-table__row'>
        <th class='govuk-table__cell'>
          <span class="govuk-caption-m govuk-!-font-size-16"><%= application_choice.application_form.support_reference %></span>
          <%= govuk_link_to application_choice.application_form.full_name, provider_interface_application_choice_path(application_choice) %>
        </th>
       <td class='govuk-table__cell'>
         <% if current_provider_user.providers.size > 1 %>
           <span class='govuk-caption-m govuk-!-font-size-16'>
             <%= application_choice.offered_course.provider.name %>
           </span>
         <% end %>

         <%= application_choice.offered_course.name_and_code %>
       </td>
       <td class='govuk-table__cell'><%= render ProviderInterface::ApplicationStatusTagComponent.new(application_choice: application_choice) %></td>
       <td class='govuk-table__cell govuk-table__header--numeric'><%= application_choice.updated_at.to_s(:govuk_date_short_month) %></td>
      </tr>
    <% end %>
  </tbody>
</table>
