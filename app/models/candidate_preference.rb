class CandidatePreference < ApplicationRecord
  belongs_to :candidate
  has_many :location_preferences, dependent: :destroy, class_name: 'CandidateLocationPreference'

  enum :pool_status, {
    opt_in: 'opt_in',
    opt_out: 'opt_out',
  }

  enum :status, {
    draft: 'draft',
    published: 'published',
  }

  def create_draft_dup
    dup_record = dup
    dup_record.status = 'draft'

    ActiveRecord::Base.transaction do
      dup_record.save!

      location_preferences.order(:created_at).each do |location|
        dup_record.location_preferences.create!(
          location.attributes.except(
            'id',
            'candidate_preference_id',
            'created_at',
            'updated_at',
          ),
        )
      end
    end

    dup_record
  end

  def self.within
    CandidateLocationPreference.within(
      [10, 50],
      units: :miles,
      origin: [53.451429456576705, -2.236018961763578],
    ).select(:id)
  end

  def self.run
    candidate_ids_current_cycle = ApplicationForm.current_cycle.pluck(:candidate_id)
    within_range = [10, 20, 30, 50, 100]
    coordinates = [[52.702096, 0.800128], [51.003051, 0.776034], [51.320853, 0.988229], [56.343692, -2.754426], [55.028519, -4.812914], [54.616854, -6.43594], [58.126612, -7.904507], [50.912069, -0.05204], [51.76187, -6.954539], [54.359814, -3.670816], [51.51199, -2.47792], [56.107228, -3.246474], [55.945532, -7.520138], [50.288911, -3.118186], [54.16653, -1.097408], [56.781241, -4.85758], [56.602786, -2.031893], [57.289472, -1.533141], [54.13891, -3.951914], [51.55225, 0.862003], [57.252011, -6.585152], [55.031661, -3.565934], [52.160602, 0.283835], [54.870461, 1.714489], [53.713623, -5.059485], [53.862714, -7.215985], [51.135395, -7.767937], [58.656783, -4.13851], [54.517481, -2.787138], [57.034479, -5.875049], [52.488082, -4.410858], [51.559274, -3.091691], [52.475289, -6.767278], [56.287378, -4.916818], [58.27342, -6.153501], [54.779289, -6.067413], [53.707776, -3.458111], [53.093819, -5.034382], [58.510567, 0.21267], [52.309235, -0.883746], [50.526948, -7.803783], [53.367572, -4.020158], [52.926996, -8.079878], [54.352014, 0.307593], [55.30233, -2.234603], [50.234173, -7.795165], [58.299711, -3.293684], [51.369016, -7.039123], [51.898325, -2.189168], [53.077691, -2.044642], [53.970566, -0.995772], [57.338518, -3.918838], [52.070024, -6.567867], [58.625587, -8.016763], [50.175998, -8.088108], [56.947311, -3.530616], [51.983366, -0.144635], [55.949469, -6.341636], [55.984386, -8.368941], [52.02332, -8.418156], [49.909734, -7.083614], [52.381427, -4.238826], [50.616633, -7.453546], [52.709117, 0.493191], [50.643266, -7.227843], [53.634296, -5.159694], [58.65974, 0.677265], [56.007318, -0.055492], [54.996535, 0.48322], [50.859479, -3.611232], [54.235022, -8.362177], [52.738766, -2.05443], [52.459276, 0.914546], [51.547543, 0.642711], [54.84138, -7.386395], [56.17535, -7.095088], [54.126403, -8.387674], [52.955856, -2.371485], [51.034476, -1.429964], [56.32801, -0.185392], [56.988173, -8.399254], [51.891007, 0.088349], [51.619245, -7.275259], [58.329603, 1.324156], [52.649783, 1.543912], [50.619896, -7.775173], [56.187188, -5.081071], [54.467734, -0.291209], [53.021515, -1.827362], [54.904049, 1.031006], [58.082263, 0.99681], [58.200042, -0.915099], [54.764598, -5.19011], [50.993059, -6.324562], [51.338542, 0.868529], [53.422658, 0.984115], [51.631691, -1.316907], [52.207898, -0.635596], [51.910144, 1.483885], [56.767258, -5.081597], [53.079084, -1.512625], [57.787057, -4.497537], [55.121122, -3.353271], [50.985239, -5.185004], [58.688771, -7.952828], [55.257441, 0.03786], [55.514839, -3.6621], [54.58487, 0.388638], [51.58097, -6.260551], [50.293065, -7.69357], [50.565454, -6.480759], [53.336814, -7.481651], [55.825446, 1.418898], [56.056317, 0.610836], [56.183768, -2.403724], [54.592663, -5.655007], [58.271684, -6.224003], [52.5841, -0.162594], [54.160731, -6.753374], [56.357931, -5.916282], [51.236411, 1.581252], [56.817841, -0.070296], [55.427944, 1.200627], [56.764628, -0.02606], [50.995479, -3.209271], [53.850171, 0.921623], [53.502727, -8.152938], [55.767638, -7.551939], [58.029811, -0.593651], [53.505791, -2.800923], [57.718688, -0.967732], [55.86305, -0.065184], [49.906403, -1.313335], [51.168061, -1.672594], [58.431643, -7.751469], [54.876242, -7.146985], [55.683763, -2.580411], [58.477015, -2.140391], [51.626862, 1.779109], [52.657509, -5.873573], [51.28313, -4.170612], [57.897893, -8.110582], [52.86544, -3.298076], [57.409662, -3.185454], [56.835556, -4.734911], [58.6858, -5.145154], [52.576735, -5.147055], [58.634174, -3.185383], [54.519644, -4.384069], [55.234492, -0.099661], [57.682535, -0.600427], [58.235947, -8.530293], [55.400915, -0.427204], [53.437341, 0.519814], [52.045464, -0.212907], [51.927624, -4.468327], [56.990359, -0.298008], [55.993981, -6.932296], [53.094085, -8.044329], [53.366882, -2.220274], [50.096823, -1.963029], [54.172928, -5.95584], [53.089216, -5.1126], [58.462655, -0.951718], [54.868576, -3.615557], [52.053452, -6.931794], [57.336864, 0.956131], [50.408748, -8.026738], [51.812854, -3.676952], [57.585161, -5.634697], [56.92492, -8.538741], [52.106123, 1.054058], [56.131935, -7.10241], [53.511902, -7.64501], [58.408297, -3.186589], [55.286335, -3.268509], [56.96023, -6.049297], [54.028351, -0.912577], [51.065405, -0.460576], [57.331774, -0.535919], [50.669457, -5.202106], [54.380464, -3.887482], [51.524655, 0.626552], [55.334624, -0.042418], [55.55164, -3.840929], [52.57201, -3.650733], [52.616312, 1.348867], [50.019462, -0.448816], [56.513261, -5.958943], [50.608396, -7.950245], [58.209019, -1.073931], [53.909422, 0.453218], [56.39249, -5.954287], [55.687927, -5.947422], [52.159708, -8.182009], [57.352882, -1.443471], [56.682376, -8.360901], [53.544822, -1.69508], [50.64001, 0.806899], [55.750095, 0.123346], [57.635638, -3.857672], [55.332175, 0.08689], [50.30106, 0.912097], [56.795686, -4.200306], [54.461559, -5.261277], [52.225114, 1.333009], [56.270567, -3.594564], [54.201331, 1.361144], [55.102994, -4.316742], [50.273315, -5.058688], [58.535956, -7.206697], [57.273669, -3.055717], [55.081542, -1.094529], [51.292985, 1.696532], [52.360323, -3.395604], [55.654695, -2.202009], [52.30039, 1.620641], [51.062819, -7.373672], [55.856912, -4.607445], [52.416109, 0.357683], [51.46526, -7.912199], [54.971609, -2.992725], [55.229019, -4.611955], [55.012963, 0.774753], [58.624632, -1.266122], [53.158716, -6.002478], [54.318949, -5.572688], [57.149823, -6.445687], [52.022629, -6.128445], [53.512256, -5.912123], [50.50931, -6.999684], [56.720475, -4.070129], [53.61678, -0.492812], [55.22207, 1.687466], [50.413001, -8.46728], [54.915116, 0.897982], [57.433825, -1.77411], [50.225134, 0.411407], [53.616832, -0.78586], [54.315776, -0.762779], [53.621709, -7.43231], [53.351987, -0.64588], [49.954018, -8.322989], [55.530315, -7.127736], [55.367486, -2.974915], [56.898648, -2.259591], [54.62071, 0.439005], [50.36171, 0.539543], [52.035572, 1.13165], [54.900166, -7.802269], [55.567472, -0.847891], [55.797131, -1.381707], [54.880595, 0.109212], [56.727571, 1.778293], [55.151273, -8.191094], [57.48831, -6.197686], [50.220293, -8.199599], [54.10345, -4.133892], [54.805068, 0.34624], [51.377683, -6.927619], [51.111318, 1.299887], [49.959906, -4.925194], [56.104428, -0.180815], [55.556029, 1.128542], [56.052926, 0.092086], [55.00902, -0.436745], [49.905818, -6.710293], [55.33993, 0.378206], [57.648967, -7.512853], [54.35648, -2.302866], [52.48164, -7.347276], [54.128984, -1.518175], [58.56123, 0.137654], [58.524309, 0.991536], [54.942582, -0.782604], [54.861966, -4.046639], [51.993127, -2.445823], [50.341854, 0.18578], [53.030239, -0.811231], [56.07293, -8.087281], [56.941945, 0.730468], [51.335262, -2.494208], [52.738391, -2.756023], [56.826926, -2.036675], [53.201532, -4.687501], [56.425901, -3.561726], [55.114451, -0.030939], [57.000472, -0.910609], [50.799948, -4.826293], [58.268913, -4.723649], [58.096598, -7.771047], [56.998839, -6.478936], [50.614993, -3.467281], [50.890898, -2.695602], [57.614949, -5.308376], [53.508975, 1.759706], [56.647707, -4.232154], [53.979233, 0.979116], [58.011651, -3.13872], [50.323708, -2.710957], [54.36597, -6.066585], [51.849586, -1.379413], [54.877371, -0.091865], [55.691029, -4.442539], [53.997454, -5.28022], [57.799056, -5.97481], [56.424345, -3.014715], [52.160872, -2.966549], [55.883537, -2.511183], [50.738674, 1.02454], [57.127859, -5.012292], [53.584098, -0.097415], [55.76109, -1.603541], [57.128242, -5.321824], [50.203944, -1.219773], [50.370132, -1.816077], [51.541769, 1.513902], [54.335389, 1.086619], [57.06437, -7.6755], [56.430937, -3.948669], [54.106891, -4.743892], [54.050175, -2.157852], [50.88932, -4.56292], [52.400334, -7.521921], [57.426467, -6.058345], [58.327008, -4.64871], [50.888182, -1.083378], [54.759316, -1.822356], [50.757468, -2.505993], [58.489585, -0.952791], [56.207286, -0.113811], [50.921418, -2.840101], [51.486189, -5.396083], [53.310118, -1.098956], [51.775388, -4.248948], [55.880328, -1.403309], [52.077532, -7.045759], [54.15534, -1.64361], [52.663101, -5.099537], [55.920503, 1.493319], [53.977346, -5.452579], [54.173878, -8.389612], [53.497072, -3.627384], [51.415911, -7.399643], [55.783156, -4.468275], [50.262348, -3.883566], [54.302876, -7.211204], [56.104297, -6.966152], [52.326651, -5.356417], [57.092007, -4.732957], [51.213898, -2.645912], [51.640011, -5.717716], [58.657776, -2.073642], [51.375428, 1.008097], [50.037577, -6.919747], [53.836441, -2.679207], [54.037991, -4.822908], [54.978479, 1.646214], [50.158845, -7.632269], [52.956794, -6.797176], [53.044708, -8.295791], [51.090398, -1.229539], [53.710782, -7.308487], [51.16738, -3.477411], [56.488962, -1.434704], [58.620543, 1.707612], [53.342532, -1.585321], [50.114459, -0.431336], [52.260074, -0.984844], [56.719778, 1.266385], [50.852751, -1.392444], [53.84737, 0.746208], [51.578715, -0.212656], [54.416711, -0.307207], [49.928457, -4.276101], [55.977767, -7.309575], [49.993503, -6.403468], [57.383895, -3.685305], [56.284734, -5.036725], [52.488883, 1.118361], [54.939529, -2.624469], [50.392001, -5.072557], [54.947577, 0.82056], [54.435277, -2.631991], [55.151317, 1.732382], [58.234048, -5.252866], [56.912986, -8.466552], [57.395696, -1.116158], [52.477757, -0.829639], [53.046282, -2.151756], [49.901404, -2.696523], [54.047308, -4.948055], [53.934842, 1.201621], [55.645216, -3.924142], [57.073724, -6.677415], [56.180572, 1.391962], [52.579025, -6.371599], [54.851639, 0.540585], [57.163847, -6.368201], [55.652231, -0.132133], [57.433128, -7.792901], [58.429021, -0.430819], [57.593921, -5.815026], [53.382489, 0.366132], [55.700198, -6.105242], [58.006479, -6.131177], [51.582934, -1.053305], [50.892144, 1.10581], [50.035744, -3.526954], [54.427849, 0.538258], [53.429526, -5.039976], [50.00307, -6.854135], [57.043484, -1.837761], [55.690939, -6.540878], [57.894419, -8.229643], [51.123279, 1.367971], [50.686452, -6.374606], [53.660585, 0.874546], [51.013325, -1.12226], [53.208425, -2.274404], [52.25771, -0.585062], [50.412132, -6.639168], [51.024206, -5.438123], [52.317105, 0.333068], [56.095582, 1.660812], [54.570618, -0.671098], [52.901336, -6.154689], [53.685843, -8.157646], [54.495846, -8.358675], [55.255088, -7.402593], [56.017916, -8.534881], [55.578014, -0.071056], [53.95926, -3.379384], [52.669688, -3.303281], [57.614578, 0.202993], [52.693877, 0.787273], [50.923817, -3.782095], [54.022144, -6.401206], [52.072214, -2.572457], [51.241765, -1.82689], [52.275786, -5.603223], [55.415722, 0.334813], [57.130682, 1.499749], [55.803567, -2.201225], [53.025936, 0.781961], [53.200005, -8.573757], [51.701105, -2.527008], [54.868901, 0.922276], [51.624456, -1.737953], [51.820882, 1.284578], [55.31509, -4.323609], [54.498806, -8.187891], [56.713819, -5.994861], [58.357418, -1.795521], [51.47504, -0.957675], [52.456435, -4.473829], [58.247759, -1.098692], [51.93738, -8.004497], [54.688822, -8.163283], [58.460111, -1.273598], [54.31549, -3.500616], [54.727593, -0.974607], [50.930767, -6.269711], [50.33379, -0.973024], [51.047773, -8.016968], [54.216668, -2.125799], [56.145402, 1.439624], [56.025124, -1.193989], [53.655032, -8.530053], [57.803538, -5.727943], [50.149697, -6.586552], [54.460552, -7.596393], [50.353377, 1.616649], [57.557318, -7.554038], [53.874481, -5.986555], [56.238532, -2.30494], [54.532777, -6.70617], [58.242497, -5.819429], [56.453229, -4.38911], [56.439748, -2.533363], [52.818364, -4.154158], [51.034845, 0.744014], [55.717114, -5.765224], [56.485214, -6.070719], [52.070331, -5.565171], [57.781213, -2.163186], [52.451193, -4.556439], [58.451007, -3.610864], [58.126744, -3.787155], [55.30351, -2.65805], [52.070982, -1.845814], [50.656416, -0.693037], [50.551974, -4.27891], [51.162916, -0.993769], [50.350353, -0.404157], [52.167368, -4.314838], [54.79609, -7.796091], [55.838483, -3.541825], [56.121224, -4.865891], [55.935283, -4.708479], [50.709269, 0.465056], [51.403182, -0.62309], [49.931677, -7.494649], [54.74215, -1.022401], [53.297322, -6.998652], [54.147236, -7.352741], [56.574354, 1.63624], [53.243247, 0.539297], [53.133574, -2.797724], [50.255416, -5.736853], [52.980139, -7.19846], [55.999722, -2.175453], [55.800258, 1.256169], [56.051573, -1.693237], [54.204133, -8.246816], [57.898032, 0.198032], [53.676294, -4.234369], [57.126489, -5.970587], [57.251958, -0.214671], [56.456792, -2.31798], [49.955881, -6.747854], [58.468766, -8.538074], [51.988492, -0.598418], [51.617283, 1.555094], [58.601911, -6.931801], [54.547423, 0.133757], [56.185984, -3.043535], [51.803613, -6.259506], [57.250019, -5.569081], [55.271821, -1.066724], [50.837579, -0.100413], [51.88073, -1.908148], [57.742619, 1.240284], [50.103876, -7.446133], [56.669874, -4.396417], [54.67831, 1.360584], [57.481628, 0.021877], [51.927446, -1.419944], [57.725352, -8.242483], [51.846807, -5.071781], [52.951557, -1.71009], [51.612363, 1.23004], [53.99602, 0.456347], [54.501504, -3.982663], [56.620025, -1.558024], [53.434062, -2.870873], [58.27648, -4.416982], [51.494738, -0.031925], [56.056656, 0.761355], [53.734236, -4.852513], [51.997436, -4.370328], [56.546266, 0.323023], [51.274617, 0.962736], [50.765213, -6.252363], [55.198834, -1.820178], [58.45766, -7.072947], [55.385917, -6.753162], [54.246164, -5.53029], [55.973998, 0.245333], [58.568233, -8.495134], [52.081181, -4.418708], [54.077531, -4.544606], [51.004676, -6.558801], [50.221122, -6.513844], [57.966437, 1.23846], [51.493836, -4.957356], [55.117907, -5.033004], [53.572968, -0.543913], [55.48174, -6.151528], [57.304996, -5.809072], [51.719751, -4.715549], [57.438876, -3.43269], [55.613059, 1.756068], [53.665309, -7.353215], [51.772675, 0.665765], [54.81329, -5.90411], [50.767674, -3.400195], [57.479008, -2.305275], [51.703875, -2.913987], [56.681784, -4.685495], [54.463818, -2.534566], [51.549335, -3.160086], [54.83767, -6.126214], [58.4084, 0.609935], [51.635967, -2.285984], [57.095619, -6.777986], [50.060562, -4.628929], [54.248726, -0.052811], [54.982997, -1.198045], [56.39552, -7.262182], [55.064405, -4.383054], [56.167454, -6.432945], [57.971165, -5.082714], [53.353904, -6.691486], [53.825932, -0.871771], [55.471223, 1.755366], [57.527408, -0.495512], [50.905467, -5.721405], [57.709464, -5.413161], [58.45523, -4.485931], [51.437339, -1.028626], [52.611766, -6.35231], [56.431867, -3.036272], [56.972672, -4.291881], [57.710253, -6.7465], [54.776171, -5.811599], [51.863542, -0.47798], [53.70829, -4.964992], [50.919313, -1.255996], [57.914304, -3.041885], [52.527851, -0.160145], [53.054382, -0.422993], [55.931687, -1.123941], [52.047732, 0.064209], [50.399979, 0.470187], [52.113359, -1.655951], [54.382434, -1.113686], [50.257682, 1.150556], [55.773491, -4.165481], [51.096502, -8.035126], [58.087758, -3.810584], [57.427572, -0.943138], [52.905185, -7.677183], [54.522608, -1.635784], [57.950798, -1.452543], [55.744183, -8.081946], [53.082543, -7.854729], [58.27963, -6.952881], [57.476759, 1.020184], [57.263215, -3.981467], [52.085343, -3.323034], [54.5496, -6.981766], [58.692703, 1.301787], [50.318255, -1.886485], [53.738015, -7.911161], [52.48179, -0.961381], [53.208747, -3.661204], [57.536384, -0.158324], [57.709778, -0.091109], [53.996576, -8.243159], [54.86171, -1.576445], [55.643864, -4.496371], [57.366967, -1.627455], [51.473911, 1.650588], [54.031098, -4.373562], [52.819131, -3.747045], [56.244857, 0.14837], [57.539422, -7.575285], [54.361986, 1.566108], [50.131543, -1.722981], [51.050185, 0.818904], [52.354636, -3.396067], [51.072523, -2.757113], [52.024546, -4.128536], [57.211245, -2.468867], [52.092555, -3.596868], [55.30529, -8.569863], [56.580539, -1.208657], [51.041065, -1.616495], [55.022981, -2.038963], [52.091521, -4.422441], [58.562172, 1.519472], [57.18036, -8.175897], [58.373529, 1.626899], [55.305819, -7.893022], [51.091045, 1.376197], [53.960651, -6.451079], [54.21422, -2.05684], [58.262693, -4.893532], [57.408857, -1.609935], [55.539157, 0.938551], [50.708364, 1.224229], [57.964815, -8.369778], [52.425528, -1.26373], [56.681053, 0.776432], [56.187553, 1.140757], [50.039297, -2.397527], [55.129228, -4.018934], [52.146259, -6.364716], [56.675047, -2.708227], [50.036295, -5.317288], [51.281349, -1.129263], [54.698254, 1.347904], [50.601027, -2.26898], [53.910542, -0.451061], [52.690192, -8.054236], [51.800264, -3.164372], [55.017698, 1.230333], [52.611074, -0.469697], [51.88007, -3.580965], [53.399718, -7.882738], [52.343731, -1.544781], [54.843811, -3.016165], [51.16196, -7.781482], [58.052864, 1.027093], [54.546399, 0.988785], [55.023245, -1.959968], [51.803304, -7.504498], [53.742999, -5.702802], [58.222573, -3.247357], [55.356948, -6.376389], [56.642886, -6.88839], [55.298525, -2.069861], [54.017302, -0.298693], [56.38882, -5.565178], [53.057043, -4.810731], [58.006514, -1.040928], [53.64808, -6.232062], [57.497806, -3.923522], [51.653393, -2.507706], [50.213626, -6.560315], [58.17539, -4.167777], [56.113314, -4.344855], [53.905211, -1.225571], [52.104468, -1.557089], [57.251198, -3.488107], [54.436413, 1.113638], [52.904795, -3.993881], [55.488522, 1.451011], [53.140855, -2.293667], [54.918291, -4.565259], [53.58403, -4.96053], [58.259363, -8.263734], [54.155004, -1.725852], [52.606908, 1.340395], [53.174048, 1.366046], [53.405534, -7.071685], [54.10857, -7.266458], [53.987277, -2.588169], [58.396452, -0.719006], [53.449879, -6.712455], [53.001648, -6.988301], [57.949414, -7.080563], [50.203415, -6.518477], [51.290883, 0.058413], [53.658713, -7.082519], [50.83556, -5.900197], [52.08731, -0.446858], [51.765454, -0.484802], [53.396535, 1.092834], [53.158165, -7.392495], [57.956727, -6.608637], [54.938743, -4.672149], [57.894994, -2.629922], [50.435534, -0.897693], [58.377699, 0.532272], [50.088943, 0.757878], [56.601345, 1.576704], [57.473415, -2.855924], [57.006513, 1.109624], [56.092539, 1.246672], [55.00211, 0.826962], [55.064747, -2.53795], [56.298284, -8.560224], [55.270227, -5.881427], [52.664995, -0.002142], [58.332237, -1.341553], [50.985667, -0.641569], [58.459407, -2.173028], [50.827446, -2.205778], [54.476933, -0.573766], [53.017316, -0.043267], [55.860468, 0.611018], [53.374939, -1.320308], [58.285564, -4.210256], [50.336606, 0.74007], [53.288291, -2.351966], [50.742568, -0.495071], [57.129517, -5.241394], [50.884694, -2.990368], [52.577259, -5.237699], [54.222089, -0.412281], [50.831794, -3.774298], [56.411644, -4.943296], [52.113165, -6.260282], [51.503964, -6.58961], [52.238706, -5.853842], [53.918496, 0.844376], [58.289803, -1.483422], [51.312739, -3.56521], [54.789389, 0.750795], [58.206048, -0.969649], [53.712816, 0.618537], [51.108168, 1.384904], [51.371858, -7.005094], [49.984444, -7.440561], [53.279144, -1.494263], [57.880328, -7.847156], [54.606621, -3.838967], [57.245663, -6.217519], [51.744563, -4.08974], [54.942214, -0.33253], [51.579885, -2.771997], [54.411524, -7.367977], [57.500413, -7.924184], [53.434255, -6.258339], [57.710281, -7.276391], [52.650727, -8.117803], [54.276005, -3.218925], [55.897769, -5.11808], [51.265892, -4.94417], [54.525611, -1.038541], [50.506967, 0.653044], [50.168617, -5.418068], [51.072127, -4.945864], [51.891962, -3.882394], [55.678607, -6.943292], [55.212899, 0.072001], [52.905422, 1.137028], [57.768821, -3.712725], [57.774166, -5.704045], [54.736942, -5.306809], [56.801458, 1.570101], [57.43905, -8.513172], [58.683551, -3.674329], [55.863167, -2.760873], [55.729962, -3.678507], [52.366611, -4.911568], [51.040826, -6.991146], [54.559145, -8.46093], [50.405912, -3.285435], [58.519571, -6.709048], [55.794379, -7.33878], [50.893122, -3.499098], [55.231728, -3.865131], [55.228248, -5.596985], [55.430398, -5.415163], [55.505229, 0.163171], [52.812646, -6.282775], [52.48542, -7.496174], [55.468788, -4.27747], [50.713878, -6.202881], [49.938023, -3.675528], [50.080636, -5.59481], [51.435577, 0.063844], [54.816196, -6.606413], [56.08814, -0.991633], [52.763109, -5.398672], [54.788748, -1.114346], [53.71991, -3.294633], [53.846935, -0.018889], [52.333756, -1.512023], [51.617731, 0.424258], [52.329873, -3.757453], [56.900171, -6.319995], [55.061961, -2.679837], [52.0141, -0.314961], [57.529295, 1.493668], [56.424817, -1.289729], [55.853864, -5.310491], [55.804765, -6.573687], [51.775067, 0.950926], [49.963657, -2.485459], [56.497055, -1.746501], [53.816367, -7.833691], [51.019362, -5.449473], [50.002869, -4.12962], [57.876165, -1.764596], [50.92284, -8.290222], [56.408729, -7.917106], [51.135131, 0.583195], [55.865991, -0.028506], [57.600016, 0.385833], [51.388475, 0.5851], [55.190879, 0.326804], [55.666592, -1.176418], [49.956699, -8.527536], [55.144389, -2.356269], [55.47643, 1.654367], [50.112526, -7.953583], [53.088191, -7.945973], [55.308846, -3.696921], [54.652635, -5.255144], [55.457436, -6.155408], [54.741062, -6.509619], [55.675062, -4.101935], [51.403327, -5.704678], [57.645299, -2.452922], [55.276115, -1.374453], [50.645383, -2.887379], [52.11773, -2.44024], [53.84123, -0.611533], [54.604108, -2.798411], [58.650128, -3.659266], [52.284456, -1.092436], [54.935713, -3.086001], [51.93245, -6.267847], [54.133803, -3.915988], [53.522527, -1.800601], [58.579746, -7.516643], [51.824648, 0.868932], [54.704714, -2.445889], [52.893976, -2.28619], [53.630909, -7.693957], [52.718331, -4.432278], [53.610278, 1.348311], [50.77079, -2.556459], [52.517323, -0.794559], [53.203143, -4.177911], [54.236585, -1.013475], [55.426242, -2.038771], [56.82421, -0.310712], [55.161992, -2.23394], [56.561634, -0.670221], [57.31958, -2.912232], [52.52899, -4.439467], [58.039563, -5.687953], [54.41832, -1.886636], [56.370679, 0.63474], [50.616398, -2.797443], [50.092375, -1.150893], [58.095659, -4.924791], [52.272668, -0.16601], [58.07691, -4.550233], [52.946188, -1.570452], [54.827306, -0.054448], [53.778518, -6.014366], [53.520636, -0.534068], [57.031956, -2.456724], [50.337744, -7.442802], [54.456176, -5.72513], [50.317252, -0.54002], [58.486377, -2.677728], [51.691526, -8.079159], [58.503045, -6.477934], [58.48992, -6.770252], [50.750039, -2.041787], [52.916121, 0.654951], [56.884366, -0.827077], [58.641432, 1.438957], [50.946649, 0.90328], [57.429739, -4.68833], [50.099223, 0.365807], [53.480543, -7.065383], [54.192948, -7.470512], [53.871778, -7.219596], [54.169661, -8.09302], [58.214294, -4.137809], [49.943729, -8.284441], [54.766612, -1.128746], [51.406723, -7.861266], [51.092211, 1.530558], [57.194166, -4.843159], [52.368333, -7.577616], [50.358707, -0.478745], [53.935203, -4.863121], [51.009375, -0.87212], [57.536352, -3.416141], [52.539512, -8.449769], [58.615625, 0.908669], [57.455579, -3.182402], [57.791993, -6.644448], [51.90612, -0.442698], [57.461679, -1.636067], [52.813711, -4.392563], [53.479984, 0.171399], [52.099296, -7.221329], [58.686712, -2.688464], [50.575315, -3.388897], [57.281824, 1.320206], [58.414388, -3.368105], [57.719276, 0.29338], [51.308767, -5.615891], [54.709005, -3.427692], [56.006479, -3.525974], [50.258574, -1.826598], [52.56263, -8.144464], [55.647882, -4.662723], [57.351942, 1.795221], [54.430315, -1.825288], [54.404881, -5.24422], [58.467389, -2.140857], [53.549088, -0.838881], [57.0416, -1.444197], [56.96237, -6.793691], [54.008439, 1.28258], [50.943091, -5.743666], [53.403857, -4.413783], [55.477343, -2.117781], [50.763397, -0.234197], [58.583015, -0.053189], [50.834396, -6.035659], [51.975069, 0.694886], [56.450946, -2.809059], [55.995303, -0.697221], [50.031201, -4.650722], [57.695321, -7.476454], [56.287323, 0.260489], [55.135067, -4.483143], [55.593251, -5.115209], [57.745881, -2.475905], [56.874335, -2.871603], [56.623172, -5.757185], [53.580057, -3.711801], [53.031752, -0.109234], [57.955988, -3.375205], [50.920324, -6.282832], [53.014648, 0.975953], [58.529945, -1.152903], [52.371146, 0.515129]]
    location_preferences = []
    preferences = Candidate.where(id: candidate_ids_current_cycle).map do |candidate|
      {
        pool_status: 'opt_in',
        status: 'published',
        candidate_id: candidate.id,
      }
    end

    CandidatePreference.insert_all!(preferences)

    CandidatePreference.published.each do |preference|
      2.times do
        coor = coordinates.sample
        location_preferences << {
          name: 'Some address',
          latitude: coor.first,
          longitude: coor.last,
          within: within_range.sample,
          candidate_preference_id: preference.id,
        }
      end
    end

    CandidateLocationPreference.insert_all!(location_preferences)
  end
end
